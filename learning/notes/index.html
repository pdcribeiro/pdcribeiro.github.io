<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notes</title>
    <link rel="stylesheet" href="/third-party/modern-normalize.min.css" />
    <link rel="stylesheet" href="/style/base.css" />
    <link rel="stylesheet" href="/style/layout-mobile.css" />
</head>

<body>
</body>

<script type="module">
    import LocalStorageRepo from '/lib/persistence/LocalStorageRepo.js'
    import { FileSystemRouter } from '/lib/routing.js'
    import { registerServiceWorker } from '/lib/service-worker.js'
    import { injectTagsIntoWindow, renderAfterLoad, waitPromise } from '/lib/ui/van-wrapper.js'
    import NotesManager from './NotesManager.js'

    const repo = new LocalStorageRepo('notes')
    const notesManager = new NotesManager({ repo, now: Date.now })

    injectTagsIntoWindow()

    const App = () => waitPromise(repo.init(),
        () => FileSystemRouter({ notesManager })
    )

    renderAfterLoad(App)
    registerServiceWorker()
</script>
<!-- <script type="module" src="./notes.user.test.js"></script> -->

</html>